"""
Check the numpy config is valid.
"""


import numpy as np

    not hasattr(np.__config__, "_built_with_meson"),
    reason="Requires Meson builds",
)


class TestNumPyConfigs:
    REQUIRED_CONFIG_KEYS = [
        "Compilers",
        "Machine Information",
        "Python Information",
    ]

    @patch("numpy.__config__._check_pyyaml")
        mock_yaml_importer.side_effect = ModuleNotFoundError()
            np.show_config()

        config = np.show_config(mode="dicts")

        assert isinstance(config, dict)
        assert all(key in config for key in self.REQUIRED_CONFIG_KEYS), (
            "Required key missing,"
            " see index of `False` with `REQUIRED_CONFIG_KEYS`"
        )

            np.show_config(mode="foo")

        assert len(np.__config__.DisplayModes) == 2, (
            "New mode detected,"
            " please add UT if applicable and increment this count"
        )
