"""
Tests for the `deprecate_nonkeyword_arguments` decorator
"""

import inspect

from pandas.util._decorators import deprecate_nonkeyword_arguments



@deprecate_nonkeyword_arguments(
    version="1.1", allowed_args=["a", "b"], name="f_add_inputs"
)
def f(a, b=0, c=0, d=0):
    return a + b + c + d


    assert str(inspect.signature(f)) == "(a, b=0, *, c=0, d=0)"


    with tm.assert_produces_warning(None):
        assert f(19) == 19


    with tm.assert_produces_warning(None):
        assert f(19, d=6) == 25


    with tm.assert_produces_warning(None):
        assert f(1, 5) == 6


    with tm.assert_produces_warning(None):
        assert f(1, 3, c=3, d=5) == 12


    with tm.assert_produces_warning(FutureWarning):
        assert f(6, 3, 3) == 12


    with tm.assert_produces_warning(FutureWarning):
        assert f(1, 2, 3, 4) == 10


    msg = (
        "Starting with pandas version 1.1 all arguments of f_add_inputs "
        "except for the arguments 'a' and 'b' will be keyword-only."
    )
    with tm.assert_produces_warning(FutureWarning, match=msg):
        assert f(6, 3, 3) == 12


@deprecate_nonkeyword_arguments(version="1.1")
def g(a, b=0, c=0, d=0):
    with tm.assert_produces_warning(None):
        return a + b + c + d


    assert str(inspect.signature(g)) == "(a, *, b=0, c=0, d=0)"


    with tm.assert_produces_warning(None):
        assert g(1, b=3, c=3, d=5) == 12


    with tm.assert_produces_warning(FutureWarning):
        assert g(6, 3, 3) == 12


    msg = (
        "Starting with pandas version 1.1 all arguments of g "
        "except for the argument 'a' will be keyword-only."
    )
    with tm.assert_produces_warning(FutureWarning, match=msg):
        assert g(6, 3, 3) == 12


@deprecate_nonkeyword_arguments(version="1.1")
def h(a=0, b=0, c=0, d=0):
    return a + b + c + d


    assert str(inspect.signature(h)) == "(*, a=0, b=0, c=0, d=0)"


    with tm.assert_produces_warning(None):
        assert h(a=1, b=2) == 3


    with tm.assert_produces_warning(FutureWarning):
        assert h(23) == 23


    msg = "Starting with pandas version 1.1 all arguments of h will be keyword-only."
    with tm.assert_produces_warning(FutureWarning, match=msg):
        assert h(19) == 19


@deprecate_nonkeyword_arguments(version="1.1")
def i(a=0, /, b=0, *, c=0, d=0):
    return a + b + c + d


    assert str(inspect.signature(i)) == "(*, a=0, b=0, c=0, d=0)"


class Foo:
    @deprecate_nonkeyword_arguments(version=None, allowed_args=["self", "bar"])
    def baz(self, bar=None, foobar=None):  # pylint: disable=disallowed-name
        ...


    assert str(inspect.signature(Foo.baz)) == "(self, bar=None, *, foobar=None)"


    msg = (
        r"In a future version of pandas all arguments of Foo\.baz "
        r"except for the argument \'bar\' will be keyword-only"
    )
    with tm.assert_produces_warning(FutureWarning, match=msg):
        Foo().baz("qux", "quox")
