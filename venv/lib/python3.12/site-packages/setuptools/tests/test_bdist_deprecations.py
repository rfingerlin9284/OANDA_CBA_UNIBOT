
import sys


from setuptools import SetuptoolsDeprecationWarning
from setuptools.dist import Distribution


@mock.patch('distutils.command.bdist_rpm.bdist_rpm')
    dist = Distribution(
        dict(
            script_name='setup.py',
            script_args=['bdist_rpm'],
            name='foo',
            py_modules=['hi'],
        )
    )
    dist.parse_command_line()
        dist.run_commands()

    distutils_cmd.run.assert_called_once()
